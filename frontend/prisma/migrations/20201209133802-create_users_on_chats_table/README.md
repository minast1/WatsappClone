# Migration `20201209133802-create_users_on_chats_table`

This migration has been generated by Edmond Marfo at 12/9/2020, 1:38:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "UsersOnChats" (
    "chatId" INTEGER NOT NULL,
    "participantId" INTEGER NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY ("chatId","participantId")
)

ALTER TABLE "UsersOnChats" ADD FOREIGN KEY("chatId")REFERENCES "chats"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "UsersOnChats" ADD FOREIGN KEY("participantId")REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201027005830-add_boolean_field_to_messages..20201209133802-create_users_on_chats_table
--- datamodel.dml
+++ datamodel.dml
@@ -1,11 +1,12 @@
 generator client {
-  provider = "prisma-client-js"
+  provider        = "prisma-client-js"
+  previewFeatures = ["uncheckedScalarInputs"]
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Account {
   id                 Int       @id @default(autoincrement())
@@ -102,4 +103,14 @@
   updatedAt DateTime @default(now()) @map(name: "updated_at")
   @@map(name: "files")
 }
+
+model UsersOnChats {
+  chat  Chat  @relation(fields:[chatId], references: [id])
+  chatId   Int 
+  participant User @relation(fields:[participantId] , references: [id])
+  participantId Int 
+  createdAt   DateTime @default(now())
+
+  @@id([chatId, participantId])
+}
```


