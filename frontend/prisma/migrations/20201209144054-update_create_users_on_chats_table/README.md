# Migration `20201209144054-update_create_users_on_chats_table`

This migration has been generated by Edmond Marfo at 12/9/2020, 2:40:54 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "UsersOnChats" (
    "chatId" INTEGER NOT NULL,
    "participantId" INTEGER NOT NULL,
    "createdAt" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY ("chatId","participantId")
)

ALTER TABLE "UsersOnChats" ADD FOREIGN KEY("chatId")REFERENCES "chats"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "UsersOnChats" ADD FOREIGN KEY("participantId")REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201209133802-create_users_on_chats_table..20201209144054-update_create_users_on_chats_table
--- datamodel.dml
+++ datamodel.dml
@@ -4,9 +4,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Account {
   id                 Int       @id @default(autoincrement())
@@ -49,8 +49,9 @@
   messages      Message[] // A user can have many todos
   createdAt     DateTime  @default(now()) @map(name: "created_at")
   updatedAt     DateTime  @default(now()) @map(name: "updated_at")
   Chat          Chat[]
+  chats        UsersOnChats[]
   files         File[]
   @@map(name: "users")
 }
@@ -86,8 +87,9 @@
   name      String
   messages  Message[]
   owner     User?     @relation(fields: [userId], references: [id])
   userId    Int?
+  participants     UsersOnChats[]
   createdAt DateTime  @default(now()) @map(name: "created_at")
   updatedAt DateTime  @default(now()) @map(name: "updated_at")
```


